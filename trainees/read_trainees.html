<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>عرض المتدربين فقط</title>
<style>
    body { font-family: Tahoma, sans-serif; background: #f4f4f4; margin:0; padding:20px; }
    h1 { text-align:center; color:#333; }
    table { width: 100%; border-collapse: collapse; margin-top:20px; background:#fff; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    th { background: #333; color: #fff; }
</style>
</head>
<body>

<h1>عرض المتدربين (للقراءة فقط)</h1>

<table id="traineesTable">
    <thead>
        <tr id="tableHeader"></tr>
    </thead>
    <tbody></tbody>
</table>

<script>
// ==============================================================================
//           **** رابط الجلب والقراءة (GET API) ****
// ==============================================================================
const API_URL_READ = 'https://script.google.com/macros/s/AKfycbzwL6NXW8w1Wkl5lBoWnjcI1_rkKagGrNYxXYY3RW0VHovQG7qL-sO0GHbR5_myJYlI/exec'; 
// ==============================================================================

let trainees = [];
let headers = [];

// جلب المتدربين من الجدول (باستخدام GET)
async function fetchTrainees() {
    try {
        const res = await fetch(API_URL_READ);
        const data = await res.json();
        if(data.success && data.data.trainees){
            trainees = data.data.trainees;
            headers = Object.keys(trainees[0] || {}).filter(h => h !== "__row");
            renderTable();
        } else {
             alert("تم جلب البيانات بنجاح، لكن لا توجد بيانات متدربين لعرضها.");
        }
    } catch(err) {
        alert("حدث خطأ أثناء جلب البيانات: " + err.message);
    }
}

// عرض الجدول
function renderTable() {
    const thead = document.getElementById("tableHeader");
    const tbody = document.querySelector("#traineesTable tbody");
    thead.innerHTML = "";
    tbody.innerHTML = "";

    headers.forEach(h => {
        const th = document.createElement("th");
        th.textContent = h;
        thead.appendChild(th);
    });

    trainees.forEach(t => {
        const tr = document.createElement("tr");
        headers.forEach(h => {
            const td = document.createElement("td");
            td.textContent = t[h] || "";
            tr.appendChild(td);
        });
        tbody.appendChild(tr);
    });
}

// تحميل البيانات عند فتح الصفحة
fetchTrainees();
</script>

</body>
</html>
