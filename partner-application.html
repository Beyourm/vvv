<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ ÙƒØ´Ø±ÙŠÙƒ - Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø´Ø±Ø§ÙƒØ©</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="assets/fonts/tajawal.css">
<style>
/* ======================= 1. Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª ======================= */
:root {
  --bg-light: #ecfdf5; 
  --bg-white: #ffffff;
  --bg-form: #f9fffb;
  --primary-dark: #03624b; 
  --accent-color: #10b981; 
  --text-color: #374151;
  --border-color: #a7f3d0; 
  --focus-ring: #6ee7b7;
  --error-color: #ef4444;
}

/* ======================= 2. Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø© ======================= */
/* **Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§:** ØªØºÙŠÙŠØ± font-family Ø¥Ù„Ù‰ 'Tajawal' */
html, body { margin:0; padding:0; overflow-x:hidden; font-family:'Tajawal', sans-serif; background: linear-gradient(180deg, var(--bg-light), var(--bg-white) 85%); color:var(--text-color); }
*, *::before, *::after { box-sizing:border-box; }

/* ======= Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ======= */
.container { 
    max-width:640px; 
    width:95%; 
    margin:50px auto; 
    padding:30px; 
    border-radius:12px; 
    background:linear-gradient(180deg, var(--bg-white), var(--bg-form)); 
    box-shadow:0 10px 25px rgba(0,0,0,0.1); 
}

/* ======= Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ======= */
h1 { text-align:center; font-weight:800; color:var(--primary-dark); margin-bottom:10px; }
p.subtitle { text-align:center; margin-bottom:30px; padding-bottom:15px; border-bottom:2px solid; border-image: linear-gradient(to right, transparent 5%, var(--accent-color), var(--primary-dark), transparent 95%) 1; }
h2 { 
    font-size:1.2em; 
    color:var(--primary-dark); 
    border-right:4px solid var(--accent-color); 
    padding:10px 30px; 
    margin-bottom:20px; 
    position:sticky; 
    top:0; 
    z-index:9; 
    background:var(--bg-white); 
    box-shadow:0 2px 5px rgba(0,0,0,0.05); 
    margin-left:-30px;
    margin-right:-30px;
    width: calc(100% + 60px); 
    box-sizing: border-box; 
    transition: background 0.3s;
}

/* **Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Dialog** */
.dialog h2 {
    width: auto !important; 
    margin: 10px 0; 
    padding: 0; 
    border-right: none; 
    background: transparent; 
    box-shadow: none; 
    position: static; 
    text-align: center; 
    font-size: 1.25em; 
    color: var(--primary-dark);
}
.dialog p {
    text-align: center;
    font-size: 0.9em;
}

/* ======= Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ ======= */
.form-group { margin-bottom:15px; }
.form-group label { display:block; font-weight:700; margin-bottom:8px; color:var(--primary-dark); }
input, textarea, select {
    width:100%; padding:12px 15px; border:1px solid var(--border-color); border-radius:8px; font-size:1em; background:var(--bg-form); color:var(--text-color); transition: all 0.3s ease; 
    /* **Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§:** ØªØºÙŠÙŠØ± font-family Ø¥Ù„Ù‰ 'Tajawal' */
    font-family:'Tajawal', sans-serif;
}
textarea { min-height:110px; resize: vertical; }
input:focus, textarea:focus, select:focus { border-color:var(--accent-color); box-shadow:0 0 0 3px var(--focus-ring); outline:none; }
input:not(:focus):invalid:required, textarea:not(:focus):focus:invalid:required { border-color:var(--error-color); }

/* ======= Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ ======= */
.submit-btn { 
    display:block; width:100%; padding:15px; border:none; border-radius:8px; font-size:1.1em; font-weight:800; color:#fff; cursor:pointer; margin-top:30px; 
    background:linear-gradient(135deg, var(--primary-dark), var(--accent-color)); 
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    transition:all 0.3s ease; 
}
.submit-btn:hover { 
    background:linear-gradient(135deg, var(--accent-color), var(--primary-dark)); 
    transform:translateY(-1px); 
    box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6);
}

/* ØªØ¹Ø¯ÙŠÙ„ #loading Ù„ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
#loading { text-align: center; padding: 15px; background: #fffbe6; border-radius: 8px; font-weight: 700; margin-top: 15px; display: none;}
#loading p { color: #f59e0b; margin: 0 0 10px 0;} 
#error-message { text-align: center; padding: 15px; background: #fee2e2; color: var(--error-color); border-radius: 8px; font-weight: 700; margin-top: 15px; display: none;}

/* ======= Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù€ Dialog Ùˆ Ø§Ù„Ù€ SVG (Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ©) ======= */
.overlay { position:fixed; inset:0; background: rgba(0,0,0,0.45); backdrop-filter: blur(4px); display:none; justify-content:center; align-items:center; z-index:1000; }
.overlay.show { display:flex; }
.dialog { background:linear-gradient(145deg,var(--bg-white),#f1fdf9); border-radius:24px; padding:30px; text-align:center; max-width:340px; width:90%; transform:scale(0.9); opacity:0; transition:transform .5s ease,opacity .5s ease; box-shadow:0 10px 40px rgba(0,0,0,0.2); }
.overlay.show .dialog { transform:scale(1); opacity:1; }
.check-wrap { width:120px; height:120px; margin:0 auto 20px; }
.dialog svg { width:100%; height:100%; }
.dialog .circle { fill:none; stroke:url(#grad); stroke-width:8; stroke-linecap:round; stroke-dasharray:283; stroke-dashoffset:283; animation: draw-circle 1s ease forwards; }
.dialog .tick { fill:none; stroke:var(--accent-color); stroke-width:8; stroke-linecap:round; stroke-linejoin:round; stroke-dasharray:60; stroke-dashoffset:60; opacity:0; animation: draw-tick 0.6s ease forwards 1s; }
@keyframes draw-circle { to { stroke-dashoffset:0; } }
@keyframes draw-tick { 0% { stroke-dashoffset:60; opacity:0; } 100% { stroke-dashoffset:0; opacity:1; } }
@keyframes fadeInUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
.dialog h2, .dialog p { opacity:0; transform:translateY(10px); }
.dialog h2 { animation:fadeInUp .6s ease forwards 1.6s; }
.dialog p { animation:fadeInUp .6s ease forwards 1.8s; }

/* ======================= 3. Ø£Ù†Ù…Ø§Ø· Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Progress Bar) ======================= */
.progress-wrapper {
  width: 90%;
  max-width: 400px; 
  position: relative;
  margin: 10px auto; 
}

.progress-container {
  width: 100%;
  height: 20px; 
  background: var(--border-color);
  border-radius: 25px;
  overflow: hidden;
  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
  position: relative;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--accent-color), var(--primary-dark));
  border-radius: 25px;
  transition: width 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); 
}

.progress-text {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  line-height: 20px; 
  font-weight: bold;
  color: var(--primary-dark);
  font-size: 0.8em;
  transition: color 0.3s;
}

/* ======================= 4. Ù…Ù„Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© (@media) ======================= */
@media (max-width: 600px) {
    .container {
        padding: 20px;
        margin: 30px auto;
        width: 100%; 
        box-shadow: none; 
    }
    h2 {
        padding-left: 20px;
        padding-right: 20px;
        margin-left: -20px;
        margin-right: -20px;
        width: calc(100% + 40px);
    }
    .dialog { padding: 20px; }
    .check-wrap { width: 90px; height: 90px; }
}
</style>
</head>
<body>

<div class="container">
    <div style="text-align: right; margin-bottom: 20px;">
        <a href="index.html" style="color:var(--primary-dark); text-decoration: none; font-weight: 700;">
            â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </a>
    </div>

    <h1>Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ ÙƒØ´Ø±ÙŠÙƒ</h1>
    <p class="subtitle">ğŸŒ Ù†Ø­Ù† Ù†Ø¨Ø­Ø« Ø¹Ù† Ø´Ø±ÙƒØ§Ø¡ ÙŠØ´Ø§Ø±ÙƒÙˆÙ†Ù†Ø§ Ø§Ù„Ø±Ø¤ÙŠØ© ÙÙŠ Ù†Ø´Ø± Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©.</p>
    

    <div id="error-message" style="display: none;"></div>

    <form id="partner-form" onsubmit="return false;">
        <input type="hidden" name="action" value="recordPartnership">

        <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h2>
        <div class="form-group">
            <label for="full-name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ / Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</label>
            <input type="text" id="full-name" name="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
        </div>
        <div class="form-group">
            <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input type="email" id="email" name="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required inputmode="email">
        </div>
        <div class="form-group">
            <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©)</label>
            <input type="tel" id="phone" name="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required inputmode="tel" pattern="[0-9+\s-]{8,15}">
        </div>

        <h2>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø±Ø§ÙƒØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©</h2>
        <div class="form-group">
            <label for="type">Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø§ÙƒØ© Ø§Ù„Ù…Ù‡ØªÙ… Ø¨Ù‡Ø§</label>
            <select id="type" name="Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø§ÙƒØ©" required>
                <option value="" disabled selected>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø§ÙƒØ©...</option>
                <option value="Ø´Ø±ÙŠÙƒ Ø¥Ø­Ø§Ù„Ø©">Ø´Ø±ÙŠÙƒ Ø¥Ø­Ø§Ù„Ø© (Referral Partner)</option>
                <option value="Ø´Ø±ÙŠÙƒ ØªÙ‚Ù†ÙŠ">Ø´Ø±ÙŠÙƒ ØªÙ‚Ù†ÙŠ (Technology Integration)</option>
                <option value="Ø´Ø±ÙŠÙƒ Ù…Ø­ØªÙˆÙ‰">Ø´Ø±ÙŠÙƒ Ù…Ø­ØªÙˆÙ‰ Ø£Ùˆ ØªØ³ÙˆÙŠÙ‚</option>
                <option value="Ø´Ø±ÙŠÙƒ ØªØ¯Ø±ÙŠØ¨">Ø´Ø±ÙŠÙƒ ØªØ¯Ø±ÙŠØ¨ / Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ</option>
                <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰ (ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ¶ÙŠØ­ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„)</option>
            </select>
        </div>
        <div class="form-group" id="other-type-group">
            <label for="other-type">ØªÙˆØ¶ÙŠØ­ Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø§ÙƒØ© Ø§Ù„Ø£Ø®Ø±Ù‰</label>
            <input type="text" id="other-type" name="ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ø´Ø±Ø§ÙƒØ©" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø´Ø±ÙŠÙƒ Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØŒ Ø´Ø±ÙŠÙƒ ØªÙ…ÙˆÙŠÙ„...">
        </div>
        <div class="form-group">
            <label for="company-website">Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø´Ø±ÙƒØ©/Ø§Ù„ÙƒÙŠØ§Ù† (Ø¥Ù† ÙˆØ¬Ø¯)</label>
            <input type="text" id="company-website" name="Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø´Ø±ÙƒØ©" placeholder="http://">
        </div>
        <div class="form-group">
            <label for="details">ÙƒÙŠÙ ØªØ±Ù‰ Ø£Ù† Ø´Ø±Ø§ÙƒØªÙ†Ø§ Ø³ØªÙƒÙˆÙ† Ù†Ø§Ø¬Ø­Ø©ØŸ (ØµÙ Ù†Ø¨Ø°Ø© Ø¹Ù† Ù†Ø´Ø§Ø·Ùƒ)</label>
            <textarea id="details" name="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø±Ø§ÙƒØ©" required></textarea>
        </div>
        
            <div id="loading" style="display: none;">
        <p>â³ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</p>
        <div class="progress-wrapper">
          <div class="progress-container">
            <div class="progress-bar" id="bar1"></div>
            <div class="progress-text" id="text1">0%</div>
          </div>
        </div>
    </div>
        
        
        <button type="submit" class="submit-btn" id="submit-button">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§ÙƒØ©</button>
    </form>
</div>


<div class="overlay" id="success-overlay">
  <div class="dialog">
    <div class="check-wrap">
      <svg viewBox="0 0 100 100">
        <defs>
          <linearGradient id="grad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#10b981"/>
            <stop offset="100%" stop-color="#34d399"/>
          </linearGradient>
        </defs>
        <circle class="circle" cx="50" cy="50" r="45"/>
        <path class="tick" d="M30 52 L44 66 L70 38"/>
      </svg>
    </div>
    <h2>ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­</h2>
    <p>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­. Ø³Ù†Ù‚ÙˆÙ… Ø¨Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ ÙˆØ¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.</p>
    <button class="btn" onclick="closeDialog()">Ù…ÙˆØ§ÙÙ‚</button>
  </div>
</div>

<script>
// =================================== 1. Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ===================================
const APPS_SCRIPT_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyjBOhJZWf_meTQ9gYtXTcNTvRmc9kWtAYRUrYUzRmimIMiN6kALmh2lz5Pug1ta90/exec";

// =================================== 2. Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ===================================
let form, submitButton, successOverlay, otherTypeGroup, otherTypeInput, loading, errorMessage, typeSelect;
let bar, text, interval; // Ù…ØªØºÙŠØ±Ø§Øª Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„
let timeoutID;
window.submitted = false;
const SIMULATION_DURATION_MS = 2000; 

// =================================== 3. Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© (ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„) ===================================

/** ØªØ¨Ø¯Ø£ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ùˆ ØªØ¹Ø·Ù„ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
const startLoading = () => {
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    if(interval) clearInterval(interval);
    if (bar && text) { // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        bar.style.width = '0%';
        text.innerText = '0%';
    }

    loading.style.display = 'block';
    submitButton.style.display = 'none'; 
    
    // Ø¨Ø¯Ø¡ Ù…Ø­Ø§ÙƒØ§Ø© Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„
    let width = 0;
    const targetWidth = 90;
    
    const updateInterval = 50; 
    const totalSteps = SIMULATION_DURATION_MS / updateInterval;
    const increment = targetWidth / totalSteps;

    interval = setInterval(() => {
        if (width >= targetWidth) {
            clearInterval(interval);
        } else {
            width += increment;
            if (width > targetWidth) width = targetWidth;
            if (bar && text) { // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
                bar.style.width = Math.round(width) + '%';
                text.innerText = Math.round(width) + '%';
            }
        }
    }, updateInterval);
};

/** ØªÙˆÙ‚Ù Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ùˆ ØªÙƒÙ…Ù„ Ø§Ù„Ø´Ø±ÙŠØ· Ø¥Ù„Ù‰ 100% Ø«Ù… ØªØ®ÙÙŠÙ‡ */
const stopLoading = () => {
    if (interval) clearInterval(interval);
    
    // Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¥Ù„Ù‰ 100%
    if (bar && text) { // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        bar.style.width = '100%';
        text.innerText = '100%';
    }
    
    // Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø© Ù„Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø±Ø¤ÙŠØ© 100%
    setTimeout(() => {
        loading.style.display = 'none';
        submitButton.style.display = 'block';
        submitButton.disabled = false;
        window.submitted = false;
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø´Ø±ÙŠØ· Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
        if (bar && text) { // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            bar.style.width = '0%';
            text.innerText = '0%';
        }
    }, 300); 
};

/** Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†Ø¬Ø§Ø­: Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
const formSuccessHandler = () => {
    clearTimeout(timeoutID);
    stopLoading(); 
    form.reset();
    otherTypeGroup.style.display = 'none';
    
    // ØªØ£Ø®ÙŠØ± Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ Ù„ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„
    setTimeout(() => {
        successOverlay.classList.add('show');
    }, 300);
};

/** Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø®Ø·Ø£: Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ */
const formErrorHandler = (msg) => {
    clearTimeout(timeoutID);
    stopLoading(); 
    errorMessage.textContent = msg;
    
    // ØªØ£Ø®ÙŠØ± Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ù„ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„
    setTimeout(() => {
        errorMessage.style.display = 'block';
    }, 300);

    setTimeout(() => {
        errorMessage.style.display = 'none';
    }, 7000);
};

/** Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
const closeDialog = () => {
    const dialog = document.querySelector("#success-overlay .dialog");
    dialog.style.transform = "scale(0.8)";
    dialog.style.opacity = "0";
    
    setTimeout(() => {
        window.location.href = "index.html"; 
    }, 400); 
};


// =================================== 4. ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ÙˆØ±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Init) ===================================
const init = () => {
    // Ø±Ø¨Ø· Ø¹Ù†Ø§ØµØ± DOM Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    form = document.getElementById('partner-form');
    submitButton = document.getElementById('submit-button');
    successOverlay = document.getElementById('success-overlay');
    otherTypeGroup = document.getElementById('other-type-group');
    otherTypeInput = document.getElementById('other-type');
    loading = document.getElementById('loading');
    errorMessage = document.getElementById('error-message');
    typeSelect = document.getElementById('type');
    
    // **Ø±Ø¨Ø· Ø¹Ù†Ø§ØµØ± Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„**
    bar = document.getElementById('bar1');
    text = document.getElementById('text1');


    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø­Ø§Ù„Ø© Ù…Ø¬Ù…ÙˆØ¹Ø© "Ø£Ø®Ø±Ù‰" Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    otherTypeGroup.style.display = 'none';
    otherTypeInput.required = false;

    // --- Ø±Ø¨Ø· Ø­Ø¯Ø« Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ---
    form.addEventListener('submit', function(e){
        e.preventDefault(); 
        errorMessage.style.display = 'none';
        if(!form.checkValidity()) return false;

        window.submitted = true;
        
        // 1. Ù†Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù…ÙŠÙ„ (ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
        startLoading(); 

        // 2. ØªØ£Ø¬ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø´Ø¨ÙƒÙŠ Ù„Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± Ø§Ù„Ø´Ø±ÙŠØ· Ø£ÙˆÙ„Ø§Ù‹
        setTimeout(() => {
            const formData = new FormData(form);

            fetch(APPS_SCRIPT_WEB_APP_URL, { method:'POST', body:formData })
                .then(response => {
                    if (response.ok) {
                        formSuccessHandler();
                    } else {
                        formErrorHandler('âš ï¸ ÙØ´Ù„ Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹.');
                    }
                })
                .catch(err => {
                    console.error('Fetch Error:', err);
                    formErrorHandler('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© Ø£Ùˆ Ø§Ù„Ø§ØªØµØ§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ.');
                });

            // Ù…Ø¤Ù‚Øª Ø²Ù…Ù†ÙŠ Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±
            timeoutID = setTimeout(() => {
                if(window.submitted){
                    formErrorHandler('âš ï¸ ØªØ£Ø®Ø± Ø§Ù„Ø±Ø¯ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… (Apps Script). ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø±.');
                }
            }, 15000);
        }, 0); 
    });

    // --- Ø±Ø¨Ø· Ø­Ø¯Ø« ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø§ÙƒØ© (Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø­Ù‚Ù„ "Ø£Ø®Ø±Ù‰") ---
    typeSelect.addEventListener('change', function(){
        if(this.value === 'Ø£Ø®Ø±Ù‰'){
            otherTypeGroup.style.display = 'block';
            otherTypeInput.required = true;
        } else {
            otherTypeGroup.style.display = 'none';
            otherTypeInput.required = false;
        }
    });

    // --- Ø±Ø¨Ø· Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù€ Dialog ---
    successOverlay.addEventListener('click', e=>{
        if(e.target === successOverlay) closeDialog();
    });

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø§Ù„Ø© closeDialog Ù„Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ
    window.closeDialog = closeDialog;
};

// ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('load', init);
</script>
<script src="marketer_tracker.js"></script> 
<script src="/tracker.js"></script>
</body>
</html>
