<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø´Ø±Ø§ÙƒØ§Øª </title>
<link rel="stylesheet" href="assets/fonts/tajawal.css">
<style>
/* ======================= Ø£Ù„ÙˆØ§Ù† ÙˆØ®Ø·ÙˆØ· ======================= */
:root {
  --bg-light: #f0fdfa;
  --primary-dark: #047857;
  --accent-color: #14b8a6;
  --text-color: #374151;
  /* (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ± Ù„Ù„Ø®Ø· Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
  --main-font: 'Tajawal', sans-serif;
}
body {
  /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† 'Cairo' Ø¥Ù„Ù‰ 'Tajawal' */
  font-family: var(--main-font); 
  padding:25px;
  background: linear-gradient(to bottom, #f0fdfa, #d1fae5); 
  color:var(--text-color);
  line-height:1.6;
  /* Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù†Øµ Ø§Ù„Ø¹Ø§Ø¯ÙŠ (Regular) */
  font-weight: 400; 
}
h1 { 
  color:var(--primary-dark); 
  /* ØªÙ… Ø¶Ø¨Ø· Ø§Ù„ÙˆØ²Ù† Ù„ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠ Tajawal (800 Ù‡Ùˆ ExtraBold) */
  font-weight: 800; 
  margin-bottom:20px;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.1); 
  font-family: var(--main-font);
}
h2 { 
  border-bottom:2px solid var(--accent-color); 
  padding-bottom:8px; 
  margin-bottom:30px; 
  color:var(--primary-dark); 
  /* ØªÙ… Ø¶Ø¨Ø· Ø§Ù„ÙˆØ²Ù† Ù„ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠ Tajawal (700 Ù‡Ùˆ Bold) */
  font-weight: 700;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
  font-family: var(--main-font);
}


/* ======================= ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± "ÙƒÙ† Ø´Ø±ÙŠÙƒØ§Ù‹" Ø§Ù„Ù…Ø«Ø¨Øª Ø¨Ø§Ù„Ø£Ø³ÙÙ„ ======================= */
.partner-btn {
  position: fixed; 
  bottom: 25px; 
  left: 25px; 
  top: auto; 
  
  display: inline-flex;
  align-items: center;
  gap: 8px; 
  background: var(--accent-color); 
  color: #fff;
  padding: 12px 20px; 
  border-radius: 50px; 
  text-decoration: none;
  font-weight: 700;
  font-size: 1em;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); 
  transition: 0.3s;
  z-index: 100; 
}
.partner-btn:hover {
  background: var(--primary-dark);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
  animation: bounce 0.3s; 
  transform: translateY(-2px); 
}
@keyframes bounce {
  0% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
  100% { transform: translateY(-2px); }
}
.partner-btn .icon {
  font-size: 1.2em;
  line-height: 1;
}

/* ======================= ØªØ­Ø±ÙŠÙƒ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆÙ…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù‚Ø³Ù… ======================= */
.section {
  margin-left: auto; 
  margin-right: auto;
  max-width: 700px; 
  padding: 20px;
  margin-bottom: 50px; 
  background: #ffffff90; 
  border-radius: 15px; 
  box-shadow: 0 10px 20px rgba(0,0,0,0.05); 
  opacity:0;
  transform:translateY(40px); 
  transition:opacity 0.8s ease-out, transform 0.8s ease-out; 
}
.section.visible { opacity:1; transform:translateY(0); } 

/* ======================= ØªØµÙ…ÙŠÙ… Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ======================= */
.slider-container {
  margin: 0 auto; 
  position:relative;
  overflow:hidden;
  background:#fff;
  padding:0 20px;
  border-radius:12px;
  box-shadow:0 6px 15px rgba(0,0,0,0.1);
  display:flex;
  flex-direction: column; 
  align-items:center;
  justify-content:center;
  min-height:280px; 
}
.slide {
  position:absolute; 
  inset: 0; 
  margin: auto; 
  max-width: 90%; 
  padding: 40px 0; 
  
  display: flex; 
  flex-direction: column; 
  justify-content: center; 
  align-items: center; 
  text-align: center; 
  
  opacity:0;
  transform: translateX(100%); 
  z-index:1;
  min-height: inherit; 

  /* ğŸ›‘ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø²ÙŠØ§Ø¯Ø© Ø²Ù…Ù† Ø§Ù„Ø­Ø±ÙƒØ© ÙˆÙ†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø¬Ø°Ø§Ø¨ */
  transition: opacity 0.8s ease-out, transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}
.slide.active { 
  opacity:1; 
  transform: translateX(0); 
  z-index:2; 
}

/* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
.slide strong, 
.slide p {
    display: block; 
    width: auto; 
    text-align: center; 
    margin: 5px 0; 
}

.slide img {
  max-height:120px; 
  width:auto; 
  display:block;
  margin: 0 auto 15px; 
  object-fit:contain;
  filter:drop-shadow(0 4px 8px rgba(0,0,0,0.15)); 
}
.slide strong {
  font-size:1.25em; 
  color:var(--primary-dark);
  margin-bottom:8px;
  font-weight:800;
}
.link-btn {
  display:inline-block;
  background:var(--primary-dark);
  color:#fff;
  padding:10px 25px; 
  border-radius:8px;
  text-decoration:none;
  font-weight:700;
  margin-top:15px;
  transition:0.3s;
}
.link-btn:hover { 
  background:var(--accent-color); 
  transform:translateY(-3px) scale(1.03); 
  box-shadow: 0 5px 10px rgba(0,0,0,0.2);
}
.buttons {
  position:absolute;
  top:50%;
  width:100%;
  display:flex;
  justify-content:space-between;
  transform:translateY(-50%);
  pointer-events:none; 
  z-index: 15; 
}
.btn {
  pointer-events:auto; 
  background:var(--primary-dark); 
  color:#fff;
  border:none;
  padding: 8px 12px; 
  border-radius:50%;
  cursor:pointer;
  font-size: 1.5rem; 
  z-index:10; 
  transition:0.3s;
  margin:0 10px; 
  box-shadow: 0 3px 6px rgba(0,0,0,0.2);
} 
.btn:hover { 
  background:var(--accent-color); 
  color:#fff; 
  transform: scale(1.1); 
}

/* 1. Ù†Ù‚Ù„ Ø§Ù„Ù†Ù‚Ø§Ø· (Dots) Ø¥Ù„Ù‰ Ø®Ø§Ø±Ø¬ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± */
.dots-container-wrapper { 
    position: static; 
    margin-top: 20px; 
    margin-bottom: 0;
    display: flex;
    justify-content: center; 
    width: 100%;
    z-index: 5; 
}
.dots-viewport {
  max-width:350px; 
  overflow:hidden;
  margin:0 auto; 
}
.dots-container {
  display:flex;
  justify-content:center;
  transition:transform 0.3s ease;
  padding: 10px 0; 
}
.dot {
  height:15px; 
  width:15px;
  margin:0 8px;
  background:#fff;
  border:3px solid var(--primary-dark);
  border-radius:50%;
  cursor:pointer;
  transition:0.3s;
}
.dot.active { 
  background:var(--primary-dark); 
  transform:scale(1.1); 
  border-color: var(--accent-color); 
}
@media (max-width:600px) {
  body { padding:15px; }
  .dots-viewport { max-width:250px; }
  .partner-btn {
    bottom: 15px;
    left: 15px;
    padding: 10px 15px;
    font-size: 0.9em;
  }
}
</style>
</head>
<body>

<a href="partner-application.html" class="partner-btn" aria-label="Ù‚Ø¯Ù… Ù„ØªØµØ¨Ø­ Ø´Ø±ÙŠÙƒØ§Ù‹">
    <span class="icon">ğŸ¤</span> ÙƒÙ† Ø´Ø±ÙŠÙƒØ§Ù‹
</a>

<h1>Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø´Ø±Ø§ÙƒØ§Øª</h1>
<div id="content"></div>

<script>
/* ===================================== Ø±Ø§Ø¨Ø· Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Google Sheet ===================================== */
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbydb3HoWyuTJbYjJGbPjr_YsQqB9mPMBM-Em8WkPVSHuIq0oDcoZFwYeAgi68qPAS4d/exec";
let timers = {};
const MAX_DOTS = 5; 
const SLIDE_INTERVAL = 5000; // ğŸ›‘ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: 5 Ø«ÙˆØ§Ù†ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø±Ø§Ø¦Ø­

/* ÙˆØ¸ÙŠÙØ© Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
function showLoading(contentDiv) {
    contentDiv.innerHTML = `
        <div style="text-align:center; padding:50px; color:var(--primary-dark);">
            <div style="border: 4px solid #f3f3f3; border-top: 4px solid var(--accent-color); border-radius: 50%; width: 40px; height: 40px; animation: spin 2s linear infinite; margin: 0 auto 15px;"></div>
            <strong>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±Ø§ÙƒØ§Øª ÙˆØ§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Øª...</strong>
            <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
        </div>
    `;
}

/* ===================================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ===================================== */
async function loadData() {
  const contentDiv = document.getElementById('content');
  showLoading(contentDiv);

  try {
    const resp = await fetch(WEB_APP_URL);
    if (!resp.ok) throw new Error('Failed to fetch data.');
    const data = await resp.json();

    let html = '';
    let sectionCount = 0; 
    
    for(const section in data){
      html += `<div class="section" data-section="${section}" style="transition-delay: ${sectionCount * 0.1}s;"><h2>${section}</h2>`; 
      
      sectionCount++;
      
      if(data[section].length===0){ 
        html += `<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯.</p>`; 
      } else {
        html += `<div class="slider-container" id="slider-${section}">`;
        
        // 1. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ (Slides)
        data[section].forEach((item,index)=>{
          const altText = `Ø´Ø¹Ø§Ø± ${item.Title || section}`; 
          const imgHtml = item.ImageURL ? `<img src="${item.ImageURL}" alt="${altText}" loading="lazy">` : ''; 
          
          html += `<div class="slide${index===0?' active':''}" data-index="${index}">
            ${imgHtml}
            <strong>${item.Title||''}</strong>
            <p>${item.Description||''}</p>
            ${item.LinkURL?`<a href="${item.LinkURL}" target="_blank" class="link-btn" aria-label="Ø²ÙŠØ§Ø±Ø© Ø±Ø§Ø¨Ø· ${item.Title||section}">Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø±Ø§Ø¨Ø·</a>`:''}
          </div>`;
        });
        
        // 2. Ø£Ø²Ø±Ø§Ø± Prev/Next
        html += `<div class="buttons">
                  <button class="btn prev" aria-label="Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©">â€¹</button>
                  <button class="btn next" aria-label="Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©">â€º</button>
                 </div>`;
                 
        html += `</div>`; // Ù†Ù‡Ø§ÙŠØ© Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±
                 
        // 1. Ø­Ø§ÙˆÙŠØ© Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ (Ø®Ø§Ø±Ø¬ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±)
        html += `<div class="dots-container-wrapper" id="dots-${section}">
                    <div class="dots-viewport">
                        <div class="dots-container"></div>
                    </div>
                 </div>`;
      }
      html += `</div>`; // Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù‚Ø³Ù…
    }

    contentDiv.innerHTML = html;

    /* ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± */
    initSliders();

    /* ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
    initScrollAnimation();
  } catch(err){
    contentDiv.innerHTML = `<p style="color:red; text-align:center; padding:40px;">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ ØªØ­Ù„ÙŠÙ„Ù‡Ø§. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.</p>`;
    console.error(err);
  }
}

/* ===================================== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ===================================== */
function initSliders(){
  document.querySelectorAll('.slider-container').forEach((container, sectionIndex)=>{
    const slides = container.querySelectorAll('.slide');
    const slideCount = slides.length;
    
    const sectionId = container.id.replace('slider-', '');
    const dotsWrapper = document.getElementById(`dots-${sectionId}`);
    const dotsContainer = dotsWrapper ? dotsWrapper.querySelector('.dots-container') : null; 
    
    let index = 0;

    /* Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª */
    if(dotsContainer){ 
        const dotsToShow = Math.min(slideCount, MAX_DOTS); 
        
        dotsContainer.innerHTML = ''; 
        
        for(let i=0; i<dotsToShow; i++){
            const dot = document.createElement('span');
            dot.classList.add('dot');
            if(i===0) dot.classList.add('active');
            dot.dataset.slideIndex = i; 
            
            dot.addEventListener('click', ()=>{
                goToSlide(i); 
                stopAutoSlide(); startAutoSlide(container.classList.contains('in-view'));
            });
            dotsContainer.appendChild(dot);
        }
    }

    /* Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ­Ø© */
    const updateSlide = (newIndex)=>{
      slides.forEach((s,i)=> s.classList.toggle('active', i===newIndex));
      
      if(dotsContainer){
        const activeDotIndex = newIndex % MAX_DOTS; 
        
        Array.from(dotsContainer.children).forEach((d,i)=> {
            d.classList.toggle('active', i === activeDotIndex); 
        });
        
        const offset = Math.max(0, activeDotIndex - 2); 
        dotsContainer.style.transform = `translateX(-${offset * 26}px)`; 
      }
      
      index = newIndex;
    };

    /* Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø´Ø±ÙŠØ­Ø© Ù…Ø­Ø¯Ø¯Ø© */
    const goToSlide = (newIndex)=>{ updateSlide((newIndex+slideCount)%slideCount); };

    /* Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ÙˆØ§Ù„Ø³Ø§Ø¨Ù‚Ø© */
    const nextSlide = ()=> goToSlide(index+1);
    const prevSlide = ()=> goToSlide(index-1);

    /* Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø±. */
    container.querySelector('.next').addEventListener('click', nextSlide);
    container.querySelector('.prev').addEventListener('click', prevSlide);

    /* Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ */
    const startAutoSlide = (isInView = true)=>{ 
        if(!isInView) return; 
        timers[sectionIndex]=setInterval(nextSlide, SLIDE_INTERVAL); 
    };
    const stopAutoSlide = ()=>{ clearInterval(timers[sectionIndex]); };
    
    container.addEventListener('mouseenter', stopAutoSlide);
    container.addEventListener('mouseleave', ()=> startAutoSlide(container.classList.contains('in-view')));
    
    updateSlide(index); 
    container.dataset.initialized = 'true'; 
  });
}


/* ===================================== ØªØ£Ø«ÙŠØ± Fade-in Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± ===================================== */
function initScrollAnimation(){
  const observer = new IntersectionObserver((entries,observer)=>{
    entries.forEach(entry=>{
      const section = entry.target;
      const sliderContainer = section.querySelector('.slider-container');
      
      if(entry.isIntersecting){
        section.classList.add('visible');
        
        if(sliderContainer){
            sliderContainer.classList.add('in-view');
            const sectionIndex = Array.from(document.querySelectorAll('.section')).indexOf(section);
            clearInterval(timers[sectionIndex]); 
            if(sliderContainer.dataset.initialized === 'true'){
                const nextBtn = sliderContainer.querySelector('.next');
                if(nextBtn) timers[sectionIndex]=setInterval(() => nextBtn.click(), SLIDE_INTERVAL);
            }
        }
        
        observer.unobserve(section); 
      } 
    });
  }, { threshold:0.1 }); 
  
  document.querySelectorAll('.section').forEach(s=>observer.observe(s));
}

/* ===================================== Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ===================================== */
loadData();
</script>
<script src="marketer_tracker.js"></script> 
<script src="/tracker.js"></script>
</body>
</html>
