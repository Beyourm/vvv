<script>
  // Ø±Ø§Ø¨Ø· Apps Script (ØªÙ… Ù†Ù‚Ù„Ù‡ Ù‡Ù†Ø§ Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ)
  const APP_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyxGeQ1UMreakJe3X6GzBwzBzpHzHmEqTllv__US14CoUIf2damdO7hQEyo6pvFS88v7A/exec";
</script>



<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>âœ¨ ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø±ÙˆØ¶Ùƒ Ø§Ù„Ø®Ø§ØµØ© Ø§Ù„Ø¢Ù†</title>
  <meta property="og:title" content="Ù…Ø¤Ø³Ø³Ø© ÙƒÙ† Ø£Ù†Øª" />
<meta property="og:description" content="Ù†ØµÙ†Ø¹ Ù‚Ø§Ø¯Ø© Ø§Ù„ØºØ¯ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ø¹Ø±ÙØ©. Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ù†ÙØ³ÙƒØŒ ÙˆØ§Ø³ØªØ«Ù…Ø± ÙÙŠ Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ." />
<meta property="og:image" content="https://skliliia.netlify.app/images/photo.jpg" />
<meta property="og:url" content="https://sklilia.netlify.app/index" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="ar_AR" />

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Ù…Ø¤Ø³Ø³Ø© ÙƒÙ† Ø£Ù†Øª">
<meta name="twitter:description" content="Ù†ØµÙ†Ø¹ Ù‚Ø§Ø¯Ø© Ø§Ù„ØºØ¯ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ø¹Ø±ÙØ©. Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ù†ÙØ³ÙƒØŒ ÙˆØ§Ø³ØªØ«Ù…Ø± ÙÙŠ Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ.">
<meta name="twitter:image" content="https://skliliia.netlify.app/images/photo.jpg">

<link rel="stylesheet" href="assets/fonts/tajawal.css">
  <style>
    :root {
      /* Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ø£Ø²Ø±Ù‚ Ø­ÙŠÙˆÙŠ) */
      --primary-color: #2980b9; 
      --success-color: #2ecc71;
      --error-color: #e74c3c;
      --warning-color: #27ae60; 
      /* Ø®Ù„ÙÙŠØ© Ø£ÙØªØ­ ÙˆØ£ÙƒØ«Ø± Ù†Ø¹ÙˆÙ…Ø© */
      --background-gradient: linear-gradient(135deg, #f0f4f7, #ffffff); 
      --text-color: #34495e; 
    }
    body {
      font-family: 'Tajawal', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: var(--background-gradient);
      text-align: center;
      padding: 20px;
      /* ØªØ­Ø³ÙŠÙ† Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø§Ù… */
      line-height: 1.6; 
    }
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 16px; /* Ø²ÙŠØ§Ø¯Ø© Ù†Ø¹ÙˆÙ…Ø© Ø§Ù„Ø­ÙˆØ§Ù */
      /* Ø¸Ù„ Ù†Ø§Ø¹Ù… ÙˆØ¹Ù…ÙŠÙ‚ (Modern Soft Shadow) */
      box-shadow: 0 15px 45px rgba(0, 0, 0, 0.1); 
      max-width: 90%;
      width: 600px; 
    }
    .logo-img {
        max-width: 130px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
        height: auto;
        margin-bottom: 25px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø¹Ø§Ø± */
        display: block;
        margin-left: auto;
        margin-right: auto;
        border-radius: 10px; 
    }
    .loader {
      border: 6px solid #f3f3f3;
      border-top: 6px solid var(--primary-color); 
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px auto;
      display: block;
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .message {
      font-size: 22px; 
      margin-bottom: 20px;
      color: var(--text-color);
      font-weight: 800; 
      display: block; 
      text-align: center;
    }
    .message i {
      margin-left: 10px;
      font-size: 26px; 
    }
    
    .countdown-message-layout {
      display: flex;
      flex-direction: column; 
      align-items: center;
      justify-content: center;
      font-size: 20px; /* Ø­Ø¬Ù… Ø®Ø· Ù…Ù…ØªØ§Ø² */
      font-weight: 700;
      line-height: 1.8; /* Ø²ÙŠØ§Ø¯Ø© ØªØ¨Ø§Ø¹Ø¯ Ø§Ù„Ø£Ø³Ø·Ø± Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ø¹ÙŠÙ† */
    }

    .countdown-message-layout .main-text {
      margin: 5px 0;
    }

    .countdown-message-layout i {
      font-size: 32px; /* ØªÙƒØ¨ÙŠØ± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ */
      margin-bottom: 8px;
      margin-left: 0; 
    }
    
    .progress-bar-container {
      width: 100%;
      height: 12px;
      background: #ddd;
      border-radius: 6px;
      margin-bottom: 20px;
      overflow: hidden;
      display: none;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    .progress-bar {
      width: 0%;
      height: 100%;
      background: var(--success-color);
      border-radius: 6px;
      transition: width 0.1s linear;
    }
    #retryBtn {
      display: none;
      padding: 12px 30px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø²Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
      background: var(--warning-color); 
      color: #fff;
      border: none;
      border-radius: 8px; /* Ø­ÙˆØ§Ù Ø£Ù†Ø¹Ù… */
      cursor: pointer;
      font-size: 17px; 
      margin-top: 15px;
      transition: background 0.3s, transform 0.2s, box-shadow 0.3s;
      font-weight: 700;
    }
    #retryBtn:hover {
      background: #2ecc71; 
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); /* Ø¥Ø¶Ø§ÙØ© Ø¸Ù„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… */
    }
    .offers-list {
      display: flex;
      flex-direction: column;
      gap: 18px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙØ±Ø§Øº Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
      width: 100%;
    }
    .offer-card {
      padding: 20px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªØ¨Ø§Ø¹Ø¯ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ */
      background: var(--primary-color);
      color: #fff;
      border-radius: 12px; /* Ø­ÙˆØ§Ù Ø£Ù†Ø¹Ù… */
      cursor: pointer;
      font-size: 20px; 
      font-weight: 700;
      text-align: right;
      transition: transform 0.2s, box-shadow 0.3s, background 0.2s;
      border-bottom: 5px solid #2471a3; /* ØªØ¯Ø±Ø¬ Ø£ØºÙ…Ù‚ */
      position: relative; 
      padding-right: 60px; 
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Ø¸Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
    }
    .offer-card:before {
        content: 'ğŸ’'; 
        position: absolute;
        left: 20px; /* ØªØ¹Ø¯ÙŠÙ„ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
        font-size: 32px; /* ØªÙƒØ¨ÙŠØ± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø§Ø³ */
        top: 50%;
        transform: translateY(-50%);
        opacity: 0.9;
    }
    .offer-card:hover {
      background: #2471a3;
      transform: translateY(-5px); /* ØªØ£Ø«ÙŠØ± Ø­Ø±ÙƒØ© Ø£Ù‚ÙˆÙ‰ */
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); /* Ø¸Ù„ Ø£Ù‚ÙˆÙ‰ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… */
    }
    .offer-description {
      font-size: 16px; /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„ÙˆØµÙ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
      font-weight: 500; 
      margin-top: 10px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³Ø§ÙØ© */
      opacity: 0.9;
    }
    .icon-sad:before { content: 'ğŸ™'; }
    .icon-warn:before { content: 'âš ï¸'; }
    .icon-success:before { content: 'âœ…'; }
    .icon-gift:before { content: 'ğŸ'; }
    .icon-choose:before { content: 'ğŸ‘†'; } 
    
    @media (max-width: 600px) {
        .container {
            padding: 20px; 
        }
        .countdown-message-layout {
            font-size: 18px; 
        }
        .message {
            font-size: 20px; 
        }
    }
  </style>
</head>
<body>

  <div class="container">
    <img src="images/photo.jpg" alt="Logo" class="logo-img">
    
    <div class="loader"></div>
    <div class="message">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¹Ø±ÙˆØ¶<span id="dots">...</span></div>
    <div class="progress-bar-container">
      <div class="progress-bar"></div>
    </div>
    <div id="offersList" class="offers-list"></div>
    <button id="retryBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
  </div>

  <script>
    // **ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª Ù„Ù… ÙŠØªØºÙŠØ± Ù„Ø¶Ù…Ø§Ù† Ø«Ø¨Ø§Øª Ø§Ù„ÙˆØ¸Ø§Ø¦Ù**
    const loader = document.querySelector('.loader');
    const messageDiv = document.querySelector('.message');
    const progressBarContainer = document.querySelector('.progress-bar-container');
    const progressBar = document.querySelector('.progress-bar');
    const retryBtn = document.getElementById('retryBtn');
    const offersListDiv = document.getElementById('offersList');
    let dotsSpan = null; 

    let dotInterval = null;

    function startDotAnimation() {
      if (dotInterval) clearInterval(dotInterval);
      dotsSpan = document.getElementById('dots');
      let dotCount = 0;
      dotInterval = setInterval(() => {
        dotCount = (dotCount + 1) % 4;
        if(dotsSpan) dotsSpan.textContent = '.'.repeat(dotCount);
      }, 500);
    }

    function stopDotAnimation() {
        if (dotInterval) {
            clearInterval(dotInterval);
            dotInterval = null;
        }
    }

    async function checkOffer() {
      retryBtn.style.display = 'none';
      loader.style.display = 'block';
      progressBarContainer.style.display = 'none';
      messageDiv.style.color = 'var(--text-color)'; 
      messageDiv.innerHTML = 'Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¹Ø±ÙˆØ¶<span id="dots">...</span>';
      offersListDiv.innerHTML = '';
      startDotAnimation();

      try {
        const response = await fetch(APP_SCRIPT_URL);
        const offers = await response.json();

        let activeOffers = offers.filter(o => (o.activ || "").toUpperCase() === "Y")
          .map(o => ({
            title: o.title,
            link: `Offer.html?title=${encodeURIComponent(o.title)}`,
            description: o.description || ''
          }));

        loader.style.display = 'none';
        stopDotAnimation();


        if(activeOffers.length === 0){
          // Ù…Ø­ØªÙˆÙ‰ ØªÙØ§Ø¹Ù„ÙŠ Ø¬Ø¯ÙŠØ¯
          messageDiv.innerHTML = '<i class="icon-sad"></i> Ù„Ù„Ø£Ø³ÙØŒ **Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§Ù‹**. Ù†Ø¹Ø¯Ùƒ Ø¨Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‚Ø±ÙŠØ¨Ø§Ù‹ØŒ ØªÙÙ‚Ø¯Ù†Ø§ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!';
          messageDiv.style.color = 'var(--error-color)';
        } else if(activeOffers.length === 1){
          // ** ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ **
          startCountdown(activeOffers[0].title, activeOffers[0].link);
        } else {
          // Ù…Ø­ØªÙˆÙ‰ ØªÙØ§Ø¹Ù„ÙŠ Ø¬Ø¯ÙŠØ¯
          messageDiv.innerHTML = '<i class="icon-choose"></i> **ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!** ØªÙˆØ¬Ø¯ **Ø¹Ø¯Ø© Ø¹Ø±ÙˆØ¶ Ø­ØµØ±ÙŠØ©** Ù„ÙƒØŒ Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ø³Ø¨Ùƒ Ø§Ù„Ø¢Ù†:';
          activeOffers.forEach(offer => {
            const card = document.createElement('div');
            card.className = 'offer-card';
            card.innerHTML = `
              <div>${offer.title}</div>
              ${offer.description ? `<div class="offer-description">${offer.description}</div>` : ''}
            `;
            card.onclick = () => window.location.href = offer.link;
            offersListDiv.appendChild(card);
          });
        }

      } catch(err) {
        console.error(err);
        loader.style.display = 'none';
        progressBarContainer.style.display = 'none';
        // Ù…Ø­ØªÙˆÙ‰ ØªÙØ§Ø¹Ù„ÙŠ Ø¬Ø¯ÙŠØ¯
        messageDiv.innerHTML = '<i class="icon-warn"></i> Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.'; 
        messageDiv.style.color = 'var(--warning-color)';
        retryBtn.style.display = 'inline-block';
        stopDotAnimation();
      }
    }

    // ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© Ù„ØªØ¨Ø¯Ø£ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙ…Ù‚Ø³Ù…Ø©
    function startCountdown(offerTitle, offerLink){
      let seconds = 5;
      progressBarContainer.style.display = 'block';
      progressBar.style.width = '0%';
      
      // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù‚Ø³Ù… Ù„ÙÙƒ Ø§Ù„Ø§Ø²Ø¯Ø­Ø§Ù…
      messageDiv.innerHTML = `
        <div class="countdown-message-layout">
          <i class="icon-success"></i>
          <span class="main-text">ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯! Ø¹Ø±Ø¶ "**${offerTitle}**" Ù‡Ùˆ ÙØ±ØµØªÙƒ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©.</span>
          <span class="main-text">**Ø³ÙŠØªÙ… Ù†Ù‚Ù„Ùƒ Ø®Ù„Ø§Ù„ <span id="countdownSec">${seconds}</span> Ø«ÙˆØ§Ù†ÙŠ** Ù„Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù†Ù‡!</span>
        </div>
      `;
      messageDiv.style.color = 'var(--success-color)';

      const countdownSecSpan = document.getElementById('countdownSec');

      const interval = setInterval(() => {
        seconds--;
        progressBar.style.width = `${((5-seconds)/5)*100}%`;

        if(seconds > 0){
          countdownSecSpan.textContent = seconds;
        } else {
          clearInterval(interval);
          window.location.href = offerLink;
        }
      }, 1000);
    }

    retryBtn.onclick = checkOffer;
    checkOffer();
  </script>
<script src="marketer_tracker.js"></script> 
<script src="/tracker.js"></script>
</body>
</html>
